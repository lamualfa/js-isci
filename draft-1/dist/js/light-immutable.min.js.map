{"version":3,"sources":["light-immutable.min.js"],"names":["f","exports","_typeof","module","define","amd","window","global","self","this","isci","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","opts","KEYWORD_REGEX","RegExp","PARAM_REGEX","KEYWORD_HANDLERS","_objectSpread","keywordHandlers","next","g","matchedParam","matchedKeyword","keywordOpt","params","arguments","undefined","result","pattern","exec","substring","index","keywords","type","2","reverse","str","reversed","incrNumber","startNumber","increaser","incrCharset","charsetLength","currentIndex","processKeyword","indexCharset","charset","incrCharsets","charsets","subCharsetLength","subCharset","3","charAt","Math","floor","random","randomString","minLength","4","clonedIsci","deepClone","rfdc","5","./libs/makeImmutable","6","./libs/createMutable","./libs/keywords/incr","./libs/keywords/rand","7","randCharset","circles","refs","refsNew","keys","proto","cloneProto","o2","cur","Date","Array","isArray","cloneArray","push","k","rfdcCircles","pop","a2","clone","Object","fn","indexOf","updated","hasOwnProperty","immutableNext"],"mappings":"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","file":"light-immutable.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.isci = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\nmodule.exports = function(opts) {\n  const KEYWORD_REGEX = new RegExp('\\\\[([^\\\\[\\\\]]+)\\\\]');\n  const PARAM_REGEX = new RegExp('<([^<>]+)>');\n  const KEYWORD_HANDLERS = {\n    ...opts.keywordHandlers\n  };\n\n  const processKeyword = keywordOpt => {\n    return KEYWORD_HANDLERS[keywordOpt.type]\n      ? KEYWORD_HANDLERS[keywordOpt.type](keywordOpt)\n      : '';\n  };\n\n  /**\n   * Get next ID from ISCI Schema\n   * @returns {string}\n   * @param {object} isci ISCI Schema\n   * @param {string} isci.name ISCI Name\n   * @param {string} isci.pattern ISCI Pattern\n   * @param {object} isci.keywords ISCI Keywords\n   * @param {object} params Your parameter to be passed\n   */\n  const next = (isci, params = {}) => {\n    let result = isci.pattern;\n    let matchedParam;\n    let matchedKeyword;\n\n    while ((matchedParam = PARAM_REGEX.exec(result)) !== null)\n      result =\n        result.substring(0, matchedParam.index) +\n        (Object.prototype.hasOwnProperty.call(params, matchedParam[1])\n          ? params[matchedParam[1]]\n          : '') +\n        result.substring(matchedParam.index + matchedParam[0].length);\n\n    while ((matchedKeyword = KEYWORD_REGEX.exec(result)) !== null)\n      result =\n        result.substring(0, matchedKeyword.index) +\n        (isci.keywords[matchedKeyword[1]]\n          ? processKeyword(isci.keywords[matchedKeyword[1]])\n          : '') +\n        result.substring(matchedKeyword.index + matchedKeyword[0].length);\n\n    return result;\n  };\n\n  return { next };\n};\n\n},{}],2:[function(require,module,exports){\nconst reverse = str => {\n  let length = str.length;\n  let reversed = '';\n  while (length--) reversed += str[length];\n\n  return reversed;\n};\n\nmodule.exports = {\n  incrNumber: opts => {\n    const result = opts.startNumber + opts.index + opts.increaser;\n\n    opts.index += opts.increaser;\n\n    return result;\n  },\n  incrCharset: opts => {\n    const charsetLength = opts.charset.length;\n\n    let currentIndex = opts.index;\n    let length = opts.length;\n    let result = '';\n\n    while (length--) {\n      const indexCharset = currentIndex % charsetLength;\n\n      result += opts.charset[indexCharset];\n\n      currentIndex = (currentIndex - indexCharset) / charsetLength;\n    }\n\n    result = reverse(result);\n    opts.index += opts.increaser;\n\n    return result;\n  },\n  incrCharsets: opts => {\n    let result = '';\n    let index = opts.index;\n\n    let i = opts.charsets.length;\n    while (i--) {\n      const subCharset = opts.charsets[i];\n      const subCharsetLength = subCharset.length;\n\n      const indexCharset = index % subCharsetLength;\n\n      result += subCharset[indexCharset];\n\n      index = (index - indexCharset) / subCharsetLength;\n    }\n\n    result = reverse(result);\n    opts.index += opts.increaser;\n\n    return result;\n  }\n};\n\n},{}],3:[function(require,module,exports){\nconst randomString = (charset, length) => {\n  let result = '';\n\n  while (length--)\n    result += charset.charAt(Math.floor(Math.random() * charset.length));\n\n  return result;\n};\n\nmodule.exports = {\n  randCharset: keywordOpt =>\n    randomString(\n      keywordOpt.charset,\n      keywordOpt.length\n        ? keywordOpt.length\n        : Math.floor(\n            Math.random() * (keywordOpt.maxLength - keywordOpt.minLength + 1)\n          ) + keywordOpt.minLength\n    )\n};\n\n},{}],4:[function(require,module,exports){\nmodule.exports = function({ next }) {\n  const deepClone = require('rfdc')({\n    proto: true\n  });\n\n  /**\n   * Get next ID from ISCI Schema without manipulate original ISCI Schema\n   * @returns {object}\n   * @param {object} isci ISCI Schema\n   * @param {string} isci.pattern ISCI Pattern\n   * @param {object} isci.keywords ISCI Keywords\n   * @param {object} params Your parameter to be passed\n   */\n  const immutableNext = (isci, params) => {\n    const clonedIsci = deepClone(isci);\n\n    return {\n      result: next(clonedIsci, params),\n      updated: clonedIsci\n    };\n  };\n\n  return { next: immutableNext };\n};\n\n},{\"rfdc\":7}],5:[function(require,module,exports){\nmodule.exports = require('./libs/makeImmutable')(require('./light-mutable'));\n\n},{\"./libs/makeImmutable\":4,\"./light-mutable\":6}],6:[function(require,module,exports){\nmodule.exports = require('./libs/createMutable')({\n  keywordHandlers: {\n    ...require('./libs/keywords/incr'),\n    ...require('./libs/keywords/rand')\n  }\n});\n\n},{\"./libs/createMutable\":1,\"./libs/keywords/incr\":2,\"./libs/keywords/rand\":3}],7:[function(require,module,exports){\n'use strict'\nmodule.exports = rfdc\n\nfunction rfdc (opts) {\n  opts = opts || {}\n\n  if (opts.circles) return rfdcCircles(opts)\n  return opts.proto ? cloneProto : clone\n\n  function cloneArray (a, fn) {\n    var keys = Object.keys(a)\n    var a2 = new Array(keys.length)\n    for (var i = 0; i < keys.length; i++) {\n      var k = keys[i]\n      var cur = a[k]\n      if (typeof cur !== 'object' || cur === null) {\n        a2[k] = cur\n      } else if (cur instanceof Date) {\n        a2[k] = new Date(cur)\n      } else {\n        a2[k] = fn(cur)\n      }\n    }\n    return a2\n  }\n\n  function clone (o) {\n    if (typeof o !== 'object' || o === null) return o\n    if (o instanceof Date) return new Date(o)\n    if (Array.isArray(o)) return cloneArray(o, clone)\n    var o2 = {}\n    for (var k in o) {\n      if (Object.hasOwnProperty.call(o, k) === false) continue\n      var cur = o[k]\n      if (typeof cur !== 'object' || cur === null) {\n        o2[k] = cur\n      } else if (cur instanceof Date) {\n        o2[k] = new Date(cur)\n      } else {\n        o2[k] = clone(cur)\n      }\n    }\n    return o2\n  }\n\n  function cloneProto (o) {\n    if (typeof o !== 'object' || o === null) return o\n    if (o instanceof Date) return new Date(o)\n    if (Array.isArray(o)) return cloneArray(o, cloneProto)\n    var o2 = {}\n    for (var k in o) {\n      var cur = o[k]\n      if (typeof cur !== 'object' || cur === null) {\n        o2[k] = cur\n      } else if (cur instanceof Date) {\n        o2[k] = new Date(cur)\n      } else {\n        o2[k] = cloneProto(cur)\n      }\n    }\n    return o2\n  }\n}\n\nfunction rfdcCircles (opts) {\n  var refs = []\n  var refsNew = []\n\n  return opts.proto ? cloneProto : clone\n\n  function cloneArray (a, fn) {\n    var keys = Object.keys(a)\n    var a2 = new Array(keys.length)\n    for (var i = 0; i < keys.length; i++) {\n      var k = keys[i]\n      var cur = a[k]\n      if (typeof cur !== 'object' || cur === null) {\n        a2[k] = cur\n      } else if (cur instanceof Date) {\n        a2[k] = new Date(cur)\n      } else {\n        var index = refs.indexOf(cur)\n        if (index !== -1) {\n          a2[k] = refsNew[index]\n        } else {\n          a2[k] = fn(cur)\n        }\n      }\n    }\n    return a2\n  }\n\n  function clone (o) {\n    if (typeof o !== 'object' || o === null) return o\n    if (o instanceof Date) return new Date(o)\n    if (Array.isArray(o)) return cloneArray(o, clone)\n    var o2 = {}\n    refs.push(o)\n    refsNew.push(o2)\n    for (var k in o) {\n      if (Object.hasOwnProperty.call(o, k) === false) continue\n      var cur = o[k]\n      if (typeof cur !== 'object' || cur === null) {\n        o2[k] = cur\n      } else if (cur instanceof Date) {\n        o2[k] = new Date(cur)\n      } else {\n        var i = refs.indexOf(cur)\n        if (i !== -1) {\n          o2[k] = refsNew[i]\n        } else {\n          o2[k] = clone(cur)\n        }\n      }\n    }\n    refs.pop()\n    refsNew.pop()\n    return o2\n  }\n\n  function cloneProto (o) {\n    if (typeof o !== 'object' || o === null) return o\n    if (o instanceof Date) return new Date(o)\n    if (Array.isArray(o)) return cloneArray(o, cloneProto)\n    var o2 = {}\n    refs.push(o)\n    refsNew.push(o2)\n    for (var k in o) {\n      var cur = o[k]\n      if (typeof cur !== 'object' || cur === null) {\n        o2[k] = cur\n      } else if (cur instanceof Date) {\n        o2[k] = new Date(cur)\n      } else {\n        var i = refs.indexOf(cur)\n        if (i !== -1) {\n          o2[k] = refsNew[i]\n        } else {\n          o2[k] = cloneProto(cur)\n        }\n      }\n    }\n    refs.pop()\n    refsNew.pop()\n    return o2\n  }\n}\n\n},{}]},{},[5])(5)\n});\n"]}